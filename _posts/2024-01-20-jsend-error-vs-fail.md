---
layout: post
title: API μ‘λ‹µκ°’ ν•μ— λ€ν• κ³ λ―Ό-2
subtitle: JSend fail vs error
excerpt_image: https://raw.githubusercontent.com/lkhlkh23/lkhlkh23.github.io/master/images/2024-01-20/banner.png
categories: spring
tags: [java, spring, rest, jsend]
---

![banner](https://raw.githubusercontent.com/lkhlkh23/lkhlkh23.github.io/master/images/2024-01-20/banner.png)

μ¤λμ€ API Response Format μ— λ€ν• κ°„λ‹¨ν• ν‘μλ¥Ό ν–λ‹¤. μ•„λ μ •λ¦¬ν• λ‚΄μ©μ„ κ³µμ ν–κ³ , κΈμ •κ³Ό λ¶€μ •μ ν”Όλ“λ°±μ„ ν•λ‚μ”© λ°›μ•λ‹¤.

- μ°Έκ³  : [API μ‘λ‹µκ°’ ν•μ— λ€ν• κ³ λ―Ό](https://lkhlkh23.github.io/spring/2024/01/18/api-response-format.html)

μ°μ„  μ‚¬μ©μ μ΄μμ™€ μ„λ²„μ λΉ„μ§€λ‹μ¤ λ΅μ§ μ΄μλ¥Ό κµ¬λ¶„ν•λ” `fail` κ³Ό `error` μ— λ€ν•΄μ„λ” κΈμ •μ μ΄μ—λ‹¤.

ν•μ§€λ§, `fail` κ³Ό `error` κ²½κ³„κ°€ λ¨νΈν–λ‹¤. ν‘μν•λ” κ³Όμ •μ—μ„ λ‹¤μ–‘ν• μƒν™©μ— λ€ν•΄μ„ `fail` μΈμ§€ `error` λ…ν™•ν•κ² λ‹µλ³€ν•μ§€ λ»ν–λ‹¤. κ·Έλμ„, μ°μ„  JSend λ¬Έμ„μ—μ„ μ •μν• `fail` κ³Ό `error` μ— λ€ν•΄ λ‹¤μ‹ μ΄ν•΄ν•λ ¤κ³  ν•λ‹¤.

### fail vs error

Jsend μ—μ„ `fail` κ³Ό `error` λ¥Ό μ•„λμ™€ κ°™μ΄ μ •μν–λ‹¤.

<aside>
π’΅ fail : There was a problem with the data submitted, or some pre-condition of the API call wasn't satisfied

error : An error occurred in processing the request

</aside>

`fail` μ€ μ”μ²­μ— λ¬Έμ κ°€ μκ±°λ‚ API μ”μ²­μ μ΅°κ±΄ μ¤‘ μΌλ¶€κ°€ μ¶©μ΅±λμ§€ μ•λ” κ²½μ°λ¥Ό μλ―Έν•λ‹¤. κ²°κµ­ μ΄κ²ƒμ„ λ‚μ λ°©μ‹μΌλ΅ ν•΄μ„ν•μλ©΄, β€μ”μ²­μ— λ€ν•΄μ„ μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ²λ¦¬ν–μ§€λ§ μ΅°κ±΄μ΄ λ§μ§€ μ•μβ€™ μ΄λ‹¤.

κ²°κµ­μ€ μ„λ²„μ λ¬Έμ κ°€ μ•„λ‹, μ‚¬μ©μμ λ¬Έμ μ΄λ‹¤.

`error` λ” μ”μ²­μ„ μ²λ¦¬ν•λ” κ³Όμ •μ—μ„ λ¬Έμ κ°€ λ°μƒν•λ” κ²½μ°λ¥Ό μλ―Έν•λ‹¤. κ²°κµ­ μ΄κ²ƒμ„ λ‚μ λ°©μ‹μΌλ΅ λ‹¤μ‹ ν•΄μ„ν•μλ©΄, β€μ”μ²­μ„ μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ²λ¦¬ν•μ§€ λ»ν•¨β€™ μ΄λ‹¤.

κ²°κµ­μ€ μ‚¬μ©μμ λ¬Έμ κ°€ μ•„λ‹ μ„λ²„μ λ¬Έμ μ΄λ‹¤.

μ΄λ²μ—λ” HttpStatus λ¥Ό μ΄μ©ν•΄μ„ λ‹¤μ–‘ν• μƒν™©μ†μ—μ„ `fail` κ³Ό `error` λ¥Ό κµ¬λ¶„ν•΄λ³΄λ ¤κ³  ν•λ‹¤.

### **4XX : Client Error Responses**

ν•κµ­μ–΄λ΅ μ§μ—­ν•λ©΄, `4xx λ” μ‚¬μ©μ μ‹¤μ μ‘λ‹µ` μ΄λ‹¤.

![0](https://raw.githubusercontent.com/lkhlkh23/lkhlkh23.github.io/master/images/2024-01-20/0.png)
λ­”κ°€ λ²μ¨ 4xx μ¤λ¥μ— λ€ν•΄ λ‚΄κ°€ λ¬΄μ—‡μ„ λ§ν•κ³  μ‹¶μ€μ§€ κ°μ΄ μ¬ κ²ƒμ΄λ‹¤. λ€μ¤‘μ μΈ 4xx μ¤λ¥λ¥Ό μ‚΄ν΄λ³΄μ!

- **400 Bad Request**
  - μλ»λ μ”μ²­μΌλ΅ μΈν•΄ μ„λ²„κ°€ μ”μ²­μ„ μ²λ¦¬ν•  μ μ—†μμ„ μλ―Έ
    β†’ μ„λ²„μ λ¬Έμ κ°€ μ•„λ‹, μλ»λ μ”μ²­μΌλ΅ μΈν•΄μ„ λ°μƒ β†’ `fail`
- **401 Unauthorized, 403 Forbidden**
  - μ”μ²­μ— λ€ν•΄ μ‘λ‹µμ„ λ°›κΈ° μ„ν•΄μ„λ” μΈμ¦μ΄ ν•„μ
    β†’ μ„λ²„μ λ¬Έμ κ°€ μ•„λ‹, μΈμ¦λμ§€ μ•λ” μ‚¬μ©μμ μ”μ²­μΌλ΅ μΈν•΄μ„ λ°μƒ β†’ `fail`
- **404 Not Found**
  - μ”μ²­μ— λ€ν• λ¦¬μ†μ¤κ°€ μ΅΄μ¬ν•μ§€ μ•μ
    β†’ μ„λ²„μ λ¬Έμ κ°€ μ•„λ‹, λ‹¨μν λ°μ΄ν„°κ°€ μ΅΄μ¬ν•μ§€ μ•μ•„μ„ λ°μƒ β†’ `fail`
- **415 Unsupported Media Type**
  - μ„λ²„μ—μ„ μ§€μ›ν•μ§€ μ•λ” λ―Έλ””μ–΄ ν¬λ§·μΌλ΅ μ”μ²­
    β†’ μ„λ²„μ λ¬Έμ κ°€ μ•„λ‹, μ„λ²„μ—μ„ μ§€μ›ν•μ§€ μ•λ” λ°©μ‹μΌλ΅ μ‚¬μ©μμ μ”μ²­μΌλ΅ μΈν•΄μ„ λ°μƒ β†’ `fail`

### **5XX : Server error responses**

ν•κµ­μ–΄λ΅ μ§μ—­ν•λ©΄, `μ„λ²„ μ—λ¬ μ‘λ‹µ` μ΄λ‹¤.

- **500 Internal Server Error**
  - μ„λ²„μ— λ¬Έμ κ°€ μμμ„ μλ―Έν•μ§€λ§ μ„λ²„λ” μ •ν™•ν• λ¬Έμ μ— λ€ν•΄ λ” κµ¬μ²΄μ μΌλ΅ μ„¤λ…ν•  μ μ—†μμ„ μλ―Έ
    β†’ μ• μ μ—†λ” μ„λ²„μ λ¬Έμ  β†’ `error`
- **501 Not Implemented**
  - μ„λ²„κ°€ μ”μ²­μ„ μ²λ¦¬ν•λ”λ° ν•„μ”ν• κΈ°λ¥μ„ μ§€μ›ν•μ§€ μ•μμ„ μλ―Έ
    β†’ μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ²λ¦¬ν•μ§€ λ»ν• μ„λ²„μ λ¬Έμ  β†’ `error`
- **503 Service Unavailable**
  - μ„λ²„κ°€ μ”μ²­μ„ μ²λ¦¬ν•  μ¤€λΉ„κ°€ λμ§€ μ•μ•κ±°λ‚, μ„λ²„μ κ³Όλ¶€ν•λ¥Ό μλ―Έ
    β†’ μ„λ²„κ°€ μ”μ²­μ— λ€ν•΄ μ²λ¦¬ν•  λ¥λ ¥μ΄ λμ§€ μ•λ” μ„λ²„μ λ¬Έμ  β†’ `error`

### κ²°λ΅ 

μΈλ―Όμ¬νμ μ†μ§μ΄ μκ±°λ‚ λ‚¨νƒ“μ„ μν•λ‹¤λ©΄ `fail` κ³Ό `error` λ¥Ό κµ¬λ¶„ν•λ” κ²ƒμ€ μƒκ°λ³΄λ‹¤ μ‰½λ‹¤.

μ‚¬μ©μλ΅ μΈν• `4xx` μ½”λ“λ” `fail` μ΄κ³  μ„λ²„λ΅ μΈν• `5xx` μ½”λ“λ” `error` μ΄λ‹¤.

λ„λ¬΄ λ³µμ΅ν•κ² μƒκ°ν•  ν•„μ”κ°€ μ—†λ‹¤. μ°λ¦¬μ—κ² μΉμ™ν• `4xx` μ™€ `5xx` λ΅ κµ¬λ¶„ν•λ©΄ λ  κ²ƒ κ°™λ‹¤.
![1](https://raw.githubusercontent.com/lkhlkh23/lkhlkh23.github.io/master/images/2024-01-20/1.png)

μ¤λ ν”Όν‹° κ°€κ²©μ„ ν™•μΈν•΄λ΄¤λ‹¤. μμƒν–μ§€λ§ μ—„μ²­λ‚ κ°€κ²©μ΄ λ‹Ήν™©μ¤λ¬μ› λ‹¤. λ‚μ— λ€ν• μ μ ν• ν¬μκ°€ λ§λ”μ§€ ν•λ² μμ‹¬ν–λ‹¤.
PI, PS λ„ μ–Όλ§ λμ§€ μ•λ”λ°, μ΄κ²ƒμ΄ λ§μ€ κ²ƒμΌκΉ?!

μ•„.. μ°Έκ³ λ΅ λ‚λ” λ¬Όμ•μ΄ μ—†λ‹¤!

